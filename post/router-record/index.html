<!doctype html><html lang=en><head><meta charset=utf-8><meta name=referrer content="same-origin"><title>路由器刷机记录 :: ywy — 有约不来过夜半，闲敲棋子落灯花</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="最开始买的tp-link，宿舍上了斐迅0元购（辛酸泪），接触刷机 恩山和 拆机。官改-breed刷高格-openwrt-Padavan养老。刷高"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://ywycd.github.io/post/router-record/><link rel=stylesheet href=https://ywycd.github.io/assets/style.min.css?d41d8cd98f00b204e9800998ecf8427e><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://ywycd.github.io/img/favicon/apple-icon-precomposed.png><link rel="shortcut icon" href=https://ywycd.github.io/img/apple-touch-icon-rm.png><meta name=twitter:card content="summary"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="路由器刷机记录 :: ywy"><meta property="og:description" content="最开始买的tp-link，宿舍上了斐迅0元购（辛酸泪），接触刷机 恩山和 拆机。官改-breed刷高格-openwrt-Padavan养老。刷高"><meta property="og:url" content="https://ywycd.github.io/post/router-record/"><meta property="og:site_name" content="ywy"><meta property="og:image" content="https://ywycd.github.io/img/apple-touch-icon-rm.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2020-12-22 20:35:56 +0800 +0800"></head><body><div class="container center headings--one-size"><header class=header style=background-image:url(/img/banner-rain-731313_1920.png);background-position:50%;background-repeat:no-repeat;background-size:cover><div class=header__inner><div class=header__logo><a href=https://ywycd.github.io/><div class=logo>ASDW</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li><li><a href=/tagcloud>TagCloud</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li><li><a href=/tagcloud>TagCloud</a></li></ul></nav><div class=feed-links></div></header><div class=content><div class=post><h1 class=post-title>路由器刷机记录</h1><div class=post-meta><span class=post-date>2020-12-22</span>
<span class=post-author>::
ywy</span>
:: Mod 2020-12-23(ea35cd3)</div><span class=post-tags>#<a href=https://ywycd.github.io/tags/enshan/>enshan</a>&nbsp;
#<a href=https://ywycd.github.io/tags/github/>github</a>&nbsp;
#<a href=https://ywycd.github.io/tags/ddns/>ddns</a>&nbsp;</span><div class=post-content><div><p>最开始买的tp-link，宿舍上了斐迅0元购（辛酸泪），接触刷机
<a href=https://www.right.com.cn/forum/forum.php>恩山</a>和
<a href=https://www.acwifi.net/>拆机</a>。官改-breed刷高格-openwrt-Padavan养老。刷高格是为了多拨，实际未使用。高格改版（有纯净版加插件），插件添加失败，转到op阵营。op有一贴分享精简加插件，接触编译。杜绝隔段时间就刷机，换成老毛子。</p><h2 id=固件>固件<a href=#固件 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>恩山搜索型号，看有哪些固件可刷。目前有在使用op（插件丰富）、老毛子。
<a href="https://www.right.com.cn/forum/forum.php?mod=viewthread&tid=344825&extra=page%3D2%26filter%3Ddigest%26digest%3D1">op插件</a>结合
<a href=https://github.com/coolsnowwolf/lede>lede</a>说明编译，自建虚拟机科学或
<a href=https://p3terx.com/archives/build-openwrt-with-github-actions.html>action</a>，曾经出现过
<a href=https://www.right.com.cn/forum/thread-1573038-1-1.html>gitpod</a>。老毛子有
<a href=https://github.com/hanwckf/rt-n56u>hanwckf</a>、
<a href=https://github.com/chongshengB/Padavan-build>chongshengB</a>，感谢移植第一人荒野无灯，同样有
<a href=https://github.com/muziling/Padavan-build>Action</a>。换hanwckf源插件添加不了，上虚拟机编译，没追新。</p><h2 id=插件>插件<a href=#插件 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>科学，别人分享的实操失败，不得不提ssr+/clash好用，设备上基本都换成小猫咪。<br>DNS污染，tracker无法访问，开始dns-forwarder有用。后续失效
<a href=https://blog.minidump.info/2019/12/enhanced-coredns/>修改版coredns</a>部署失败，换新域名解决。去广告，电脑用过adbyby，现在主要用uBlock Origin,订阅
<a href=https://gitee.com/halflife/list/raw/master/ad.txt>halflife</a>，局域网adghome。<br>内网vpn。编译过老毛子里的vpn，只有softethervpn成功，还有其他方案。</p><h2 id=ddns>DDNS<a href=#ddns class=hanchor arialabel=Anchor>&#8983;</a></h2><p>动态公网ip，ddns域名+端口实现外网访问，远程操作。op的ddns脚本在<code>Network→IP Addresses and Names</code>选取。选
<a href=https://v2ex.com/t/560093>哪家</a>,目前使用noip,he.net,cf，noip需要每30天激活，he需要域名，注册免费域名推荐freenom。<br>但cf限制.tk等免费域名使用api，无法ddns、acme.sh。Github上有好多优秀工具。老毛子自带inadyn出错，运行curl提示<code>(60) Cert verify failed</code>。借用某人脚本，加上-sk可行,cf的
<a href=https://ignorance.nova.moe/ddns-with-cloudflare/>curl</a>。wan重连运行脚本，不用隔5分钟测ip变化。老毛子添加脚本，<strong>系统管理-配置管理-保存</strong>，不然重启丢失。</p><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell>curl -sk -4 <span class=s2>&#34;https://dyn.example.com:password@dyn.dns.he.net/nic/update?hostname=dyn.example.com&#34;</span>					
curl -sk https://username:password@dynupdate.no-ip.com/nic/update?hostname<span class=o>=</span>example.com

<span class=nv>home_ip</span><span class=o>=</span><span class=k>$(</span>curl ip.sb<span class=k>)</span>
curl -sk -X PUT <span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;域名的 ZoneID&gt;/dns_records/&lt;Record 的 ZoneID&gt;&#34;</span> <span class=se>\
</span><span class=se></span>     -H <span class=s2>&#34;Authorization: Bearer xxxxxxx&#34;</span> <span class=se>\
</span><span class=se></span>     -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=se>\
</span><span class=se></span>     --data <span class=s1>&#39;{&#34;type&#34;:&#34;A&#34;,&#34;name&#34;:&#34;home.nova.moe&#34;,&#34;content&#34;:&#34;&#39;</span><span class=nv>$home_ip</span><span class=s1>&#39;&#34;,&#34;ttl&#34;:120,&#34;proxied&#34;:false}&#39;</span>

</code></pre></div><h2 id=内网穿透>内网穿透<a href=#内网穿透 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>使用frp，主要小钢炮自带。
<a href=https://www.ioiox.com/frp.html>这家</a>，
<a href=https://www.iyuu.cn/archives/286/>自建服务器</a>教程。frp更新</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>wget https://github.com/fatedier/frp/releases/download/v0.34.1/frp_0.34.1_linux_arm64.tar.gz
tar -zxvf frp_0.34.1_linux_arm64.tar.gz
</code></pre></div><p><strong>光猫没事别恢复出厂设置，别恢复，别恢复</strong> 出厂后原来破解方法失效，拆机ttl有点麻烦，应该是配置升级原因。可找客服改桥接。10001按4快速报修，但AI简直智障，选宽带报修，检测正常重启，然后就自动挂掉了！！！
<a href=http://192.168.1.1/bridge_route.gch>自助修改</a>。</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://ywycd.github.io/post/auto-chekin/><span class=button__icon>←</span>
<span class=button__text>自动签到</span></a></span>
<span class="button next"><a href=https://ywycd.github.io/post/hugo-actions-gh-pages/><span class=button__text>hugo通过Github Action部署到Github Pages</span>
<span class=button__icon>→</span></a></span></div></div></div><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#固件>固件</a></li><li><a href=#插件>插件</a></li><li><a href=#ddns>DDNS</a></li><li><a href=#内网穿透>内网穿透</a></li></ul></nav></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>:: Powered by <a href=http://gohugo.io>Hugo</a> 0.81.0</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><a id=back-to-top style=display:inline-block href=javascript:void(0); onclick="window.scrollTo({top:0,behavior:'smooth'})"><span class="iconfont icon-top"></span></a><script src=https://ywycd.github.io/assets/main.js?d41d8cd98f00b204e9800998ecf8427e></script><script>const addCopyButtons=function(a){document.querySelectorAll('pre > code').forEach(function(d){const b=document.createElement('button');b.className='copy-code-button',b.type='button',b.innerText='Copy';const c=document.createElement('div');c.className='copy-code-button-wrap',c.appendChild(b),b.addEventListener('click',function(){a.writeText(d.innerText).then(function(){b.blur(),b.innerText='Done!',setTimeout(function(){b.innerText='Copy'},2e3)},function(a){b.innerText='Error'})});const e=d.parentNode;e.insertAdjacentElement('beforebegin',c)})};window.addEventListener('load',function(b){const a=document.links;for(let b=0,c=a.length;b<c;b++)a[b].hostname!=window.location.hostname&&!a[b].href.startsWith('javascript:')&&!a[b].href.startsWith('mailto:')&&(a[b].target='_blank');document.querySelectorAll('#TableOfContents li').length>0&&(document.querySelector('#post-toc').style.display='block'),document.querySelectorAll('#post-toc a').forEach(a=>{a.addEventListener('click',a=>{document.querySelectorAll('#post-toc a').forEach(a=>{a.classList.remove('active')}),a.target.classList.add('active')})}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener('click',function(a){a.preventDefault(),document.getElementById(this.getAttribute('href').substring(1)).scrollIntoView({behavior:'smooth'})})}),navigator&&navigator.clipboard&&addCopyButtons(navigator.clipboard)})</script></div></body></html>