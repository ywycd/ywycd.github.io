<!doctype html><html lang=en><head><meta charset=utf-8><meta name=referrer content="same-origin"><title>Termux笔记 :: ywy — 有约不来过夜半，闲敲棋子落灯花</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="前言 Termux是An­droid终端模拟器，手机下载安装打开即可。支持 apt、pkg软件包管理，而且完美支持 Python、PHP、Ruby"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://ywycd.github.io/post/termux-note/><link rel=stylesheet href=https://ywycd.github.io/assets/style.min.css?d41d8cd98f00b204e9800998ecf8427e><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://ywycd.github.io/img/favicon/apple-icon-precomposed.png><link rel="shortcut icon" href=https://ywycd.github.io/img/apple-touch-icon-rm.png><meta name=twitter:card content="summary"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Termux笔记 :: ywy"><meta property="og:description" content="前言 Termux是An­droid终端模拟器，手机下载安装打开即可。支持 apt、pkg软件包管理，而且完美支持 Python、PHP、Ruby"><meta property="og:url" content="https://ywycd.github.io/post/termux-note/"><meta property="og:site_name" content="ywy"><meta property="og:image" content="https://ywycd.github.io/img/apple-touch-icon-rm.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2021-03-27 15:55:42 +0800 +0800"></head><body><div class="container center headings--one-size"><header class=header style=background-image:url(/img/banner-rain-731313_1920.png);background-position:50%;background-repeat:no-repeat;background-size:cover><div class=header__inner><div class=header__logo><a href=https://ywycd.github.io/><div class=logo>ASDW</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li><li><a href=/tagcloud>TagCloud</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li><li><a href=/tagcloud>TagCloud</a></li></ul></nav><div class=feed-links></div></header><div class=content><div class=post><h1 class=post-title>Termux笔记</h1><div class=post-meta><span class=post-date>2021-03-27</span>
<span class=post-author>::
ywy</span>
:: Mod 2021-03-28(39acbf3)</div><span class=post-tags>#<a href=https://ywycd.github.io/tags/termux/>Termux</a>&nbsp;
#<a href=https://ywycd.github.io/tags/adb/>adb</a>&nbsp;
#<a href=https://ywycd.github.io/tags/ssh/>ssh</a>&nbsp;</span><div class=post-content><div><h2 id=前言>前言<a href=#前言 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Termux是An­droid终端模拟器，手机下载安装打开即可。支持 apt、pkg软件包管理，而且完美支持 Python、PHP、Ruby、Go、Nodejs、MySQL 等工具。你还可以用它安装Linux系统，可以做很多事情。第一次是从酷安下载提示网络问题，看评论区知道酷安版不完整。转去play下载。play插件收费，而在F-Droid商店上免费。后面play不再更新，换到F-Droid版。官方有提供
<a href=https://wiki.termux.com/wiki/Backing_up_Termux>备份和恢复</a> 方案。文章根据国光大佬、酷安分享、p3terx教程，自己总结记录。</p><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell>termux-setup-storage
<span class=nb>cd</span> /data/data/com.termux/files
<span class=c1># 备份</span>
tar -zcvf /sdcard/termux-backup.tar.gz home usr
<span class=c1># 恢复</span>
tar -zxf /sdcard/termux-backup.tar.gz --recursive-unlink --preserve-permissions
</code></pre></div><p>转移成功，开屏问候语改变。其他基本没变化。</p><h2 id=基本操作>基本操作<a href=#基本操作 class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=选项和菜单>选项和菜单<a href=#选项和菜单 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>长按屏幕会调出显示菜单项（包括复制、粘贴、更多），方便我们进行复制或者粘贴。</p><p><a class=post-img-lb href=https://image.3001.net/images/20200418/15872022768181.png data-caption><img src=https://image.3001.net/images/20200418/15872022768181.png alt></a></p><p>More 菜单的说明如下：</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>长按屏幕
├── COPY:    <span class=c1># 复制</span>
├── PASTE:   <span class=c1># 粘贴</span>
├── More:    <span class=c1># 更多</span>
   ├── Select URL:             <span class=c1># 提取屏幕所有网址</span>
   └── Share transcipt:        <span class=c1># 分享命令脚本</span>
   └── Reset:                  <span class=c1># 重置</span>
   └── Kill process:           <span class=c1># 杀掉当前会话进程</span>
   └── Style:                  <span class=c1># 风格配色 需要自行安装</span>
   └── Keep screen on:         <span class=c1># 保持屏幕常亮</span>
   └── Help:                   <span class=c1># 帮助文档</span>
</code></pre></div><p>左侧屏幕向右滑出来导航栏，可选收起/弹出键盘，新建/切换会话(ses­sion) 。通知栏会显示有多少会话。</p><p><a class=post-img-lb href=https://image.3001.net/images/20200418/15872022029549.png data-caption><img src=https://image.3001.net/images/20200418/15872022029549.png alt></a></p><h3 id=常用快捷>常用快捷<a href=#常用快捷 class=hanchor arialabel=Anchor>&#8983;</a></h3><p><code>音量减</code>模拟 <code>Ctrl</code> 键。下面列一些常用的按键。</p><ul><li><code>Ctrl + A</code> -> 将光标移动到行首</li><li><code>Ctrl + C</code> -> 中止当前进程</li><li><code>Ctrl + D</code> -> 注销终端会话</li><li><code>Ctrl + E</code> -> 将光标移动到行尾</li><li><code>Ctrl + K</code> -> 从光标删除到行尾</li><li><code>Ctrl + U</code> -> 从光标删除到行首</li><li><code>Ctrl + L</code> -> 相当于<code>clear</code>命令，清屏</li><li><code>Ctrl + Z</code> -> 挂起（发送 SIGTSTP 到）当前进程</li></ul><p><code>音量加</code>也可以作为产生特定输入的<code>特殊键</code>.</p><ul><li><code>音量加 + E</code> -> Esc键</li><li><code>音量加 + T</code> -> Tab键</li><li><code>音量加 + 1</code> -> F1（<code>音量增加 + 2</code> → F2…以此类推）</li><li><code>音量加 + 0</code> -> F10</li></ul><h3 id=定制常用按键>定制常用按键<a href=#定制常用按键 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>我们可以通过 <code>~/.termux/termux.properties</code> 文件来进行定制。默认不存在，先创建这个文件。当时刚下载自己设置（看了教程，已创建目录）失败后卸载。后面安装借用酷安NibaZShab配置好的when，成功设置按键、安装fish终端、screenfetch等。后续有修改，博客做个记录。
自用按键表</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>extra-keys <span class=o>=</span> <span class=o>[</span> <span class=se>\ </span><span class=o>[</span><span class=s1>&#39;ESC&#39;</span>,<span class=s1>&#39;|&#39;</span>,<span class=s1>&#39;/&#39;</span>,<span class=s1>&#39;PGUP&#39;</span>,<span class=s1>&#39;UP&#39;</span>,<span class=s1>&#39;PDDN&#39;</span>,<span class=s1>&#39;END&#39;</span><span class=o>]</span>, <span class=se>\ </span><span class=o>[</span><span class=s1>&#39;TAB&#39;</span>,<span class=s1>&#39;CTRL&#39;</span>,<span class=s1>&#39;ALT&#39;</span>,<span class=s1>&#39;LEFT&#39;</span>,<span class=s1>&#39;DOWN&#39;</span>,<span class=s1>&#39;RIGHT&#39;</span>,<span class=s1>&#39;ENTER&#39;</span><span class=o>]</span> <span class=se>\ </span><span class=o>]</span>

</code></pre></div><p><a class=post-img-lb href=http://i.endpot.com/image/A4R0C/IMG_20210328_095759.jpg data-caption=IMG_20210328_095759.jpg><img src=http://i.endpot.com/image/A4R0C/IMG_20210328_095759.jpg alt=IMG_20210328_095759.jpg></a></p><h3 id=基本命令>基本命令<a href=#基本命令 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Termux 除了支持 <code>apt</code> 命令外，还在此基础上封装了<code>pkg</code>命令，<code>pkg</code> 命令向下兼容 <code>apt</code> 命令。执行 <code>pkg upgrade</code> 相当于执行了 <code>apt update && apt upgrade</code>，简化了操作流程。
pkg命令如下。</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>pkg search &lt;query&gt;              <span class=c1># 搜索包</span>
pkg install &lt;package&gt;           <span class=c1># 安装包</span>
pkg uninstall &lt;package&gt;         <span class=c1># 卸载包</span>
pkg reinstall &lt;package&gt;         <span class=c1># 重新安装包</span>
pkg update                      <span class=c1># 更新源</span>
pkg upgrade                     <span class=c1># 升级软件包</span>
pkg list-all                    <span class=c1># 列出可供安装的所有包</span>
pkg list-installed              <span class=c1># 列出已经安装的包</span>
pkg show &lt;package&gt;              <span class=c1># 显示某个包的详细信息</span>
pkg files &lt;package&gt;             <span class=c1># 显示某个包的相关文件夹路径</span>
</code></pre></div><p>安装一些常用工具，方便后续操作。</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>pkg i -y curl wget tree vim nano git
</code></pre></div><h3 id=修改问候语>修改问候语<a href=#修改问候语 class=hanchor arialabel=Anchor>&#8983;</a></h3><p><code>vim $PREFIX/etc/motd</code>换成你想显示的。也可以使用<code>touch ~/.hushlogin</code>让它不显示。</p><h3 id=目录结构>目录结构<a href=#目录结构 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>echo</span> <span class=nv>$HOME</span>
/data/data/com.termux/files/home

<span class=nb>echo</span> <span class=nv>$PREFIX</span>
/data/data/com.termux/files/usr

<span class=nb>echo</span> <span class=nv>$TMPDIR</span>
/data/data/com.termux/files/usr/tmp/
</code></pre></div><h3 id=root权限>root权限<a href=#root权限 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>可以利用<code>proot</code>可以为手机没有root的用户来模拟一个root的环境。手机已root，推荐使用tsu，<code>pkg install tsu -y</code>。</p><blockquote><p>tsu，这是一个<code>su</code>的 Termux 版本，是一个真正的root权限，用来在termux上替代<code>su</code>。</p></blockquote><h3 id=缩放文本>缩放文本<a href=#缩放文本 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>可以使用缩放手势（双指放大缩小）来调整其字体大小。
<a class=post-img-lb href=https://image.3001.net/images/20200418/15872024914185.png data-caption><img src=https://image.3001.net/images/20200418/15872024914185.png alt></a></p><h2 id=进阶配置>进阶配置<a href=#进阶配置 class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=adb连接>adb连接<a href=#adb连接 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>酷安ID萌系生物研究员分享，安装adb和fastboot。</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>pkg update
pkg i -y git
<span class=nb>cd</span> ~
git clone https://github.com/Magisk-Modules-Repo/adb-ndk.git 
<span class=nb>cd</span> ./adb-ndk/bin/
mv -f adb.bin adb
chmod +x ./*
mv -f ./* <span class=nv>$PREFIX</span>/bin/
<span class=nb>cd</span> ~
rm -rf adb-ndk/
</code></pre></div><p>可连接其他设备。有在线adb网站，测试需要usb连接手机，在局域网内。</p><p>换到F-Droid版，adb提示log文件无权限。新建修改权限，chmod，更改文件目录失败。重新安装可行。简单的方法，点开网络adb调试，有的开发者模式里没有，要借用其他app，需root。<code>adb devices</code>会出来权限弹窗，点接受就可以。</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>adb disconnect
adb kill-server
adb devices
</code></pre></div><p>还不行就三连，重启手机。</p><h3 id=ssh服务>ssh服务<a href=#ssh服务 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>同样萌系生物研究员大佬分享的教程。</p><p>安装openssh <code>pkg i -y openssh</code>，进行配置。</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>mkdir -p <span class=nv>$PREFIX</span>/etc/ssh/ <span class=p>;</span> ssh-keygen -f ~/.ssh/id_rsa -t rsa -b <span class=m>4096</span> -N <span class=s1>&#39;&#39;</span> -m PEM <span class=p>;</span> cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys <span class=p>;</span> chmod -R <span class=m>700</span> ~/.ssh/ <span class=p>;</span> chmod <span class=m>600</span> ~/.ssh/authorized_keys <span class=p>;</span> <span class=nb>echo</span> -e <span class=s2>&#34;port 8022\nPrintMotd yes\nPasswordAuthentication no\nSubsystem sftp /data/data/com.termux/files/usr/libexec/sftp-server\nPubkeyAuthentication yes\nPermitRootLogin yes\nAuthorizedKeysFile .ssh/authorized_keys&#34;</span> &gt; <span class=nv>$PREFIX</span>/etc/ssh/sshd_config <span class=p>;</span> pkill sshd <span class=p>;</span> sshd
</code></pre></div><p>设置密码，输入<code>passwd</code>进行设置。记得<code>pkill sshd && sshd</code>重启sshd。</p><p>ssh服务网上还有其他教程，国光大佬教程就有电脑/Termux生成密钥的不同方法。</p><p>电脑连接termux，<code>ssh 192.168.x.x -p 8022 -i C:id_rsa</code>。Termux不需要设置用户名。win10cmd连接提示<code>Permissions for C:id_rsa are too open</code> 。<del>chmod 600 id_rsa复制到电脑失败，换成400也一样。</del></p><h3 id=传输文件>传输文件<a href=#传输文件 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>可以使用SSH自带的scp命令进行文件传输。</p><p>复制文件</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># scp 本地文件路径 远程主机用户名@远程主机名或IP:远程文件保存的位置路径</span>
scp local_file remote_username@remote_ip:remote_folder
</code></pre></div><p>复制目录</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># scp -r 本地文件夹路径 远程主机用户名@远程主机名或IP:远程文件夹保存的位置路径</span>
scp -r local_folder remote_username@remote_ip:remote_folder
</code></pre></div><h3 id=sftp>sftp<a href=#sftp class=hanchor arialabel=Anchor>&#8983;</a></h3><p>一般情况下，开启sshd就会顺带帮你开sftp服务，方便管理termux的内部文件。另外下载termux:api，跟termux对应商店下载，不要混用。装完termux:api的apk后，还需要输<code>pkg i -y termux-api ; cat ~/.ssh/id_rsa | termux-clipboard-set</code>，这时候它会自动把私钥文本复制到剪切板。termux:api的其他用法国光的教程里有详细说明。termux其他插件，boot开机启动，widge桌面小部件etc。</p><p>打开solid explorer或其他支持sftp的文件管理器，新建云连接，选择sftp。远程主机名localhost,端口8022。验证方式选SSH私钥，用户名乱填，最后粘贴刚才自动复制的内容。实际路径<code>/data/data/com.termux/files/home</code>。</p><p>用termux建立软链接。比如新建QQ下载，这样可以<code>home</code>目录下去访问QQ文件夹。
<code>ln -s /data/data/com.termux/files/home/storage/shared/tencent/QQfile_recv QQ</code>。删除软链接，用<code>unlink</code>命令。测试<code>unlink QQ</code>可删除。
<a class=post-img-lb href=https://image.3001.net/images/20200418/15872085834532.png data-caption><img src=https://image.3001.net/images/20200418/15872085834532.png alt></a></p><h3 id=fish终端alias>fish终端alias<a href=#fish终端alias class=hanchor arialabel=Anchor>&#8983;</a></h3><p>照研究员教程加了alias，termux-clipboard-get 获取剪切板内容，termux-clipboard-set 写入剪切板。发现重进就消失。考虑是不是fish要换路径。查阅资料，发现fish是
<a href="https://fishshell.com/docs/current/cmds/alias.html?highlight=alias">function</a> 设置。tsu看文件有无创建，同样操作切换为普通账户才能成功创建。</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>alias</span> <span class=nv>get</span><span class=o>=</span><span class=s1>&#39;termux-clipboard-get&#39;</span>
<span class=c1># This is equivalent to entering the following function</span>
<span class=k>function</span> get
    termux-clipboard-get <span class=nv>$argv</span>
end
<span class=c1># save the function </span>
funcsave get
</code></pre></div><p>这样会保存在~/.config/fish/functions文件夹下，名为xx.fish。</p><h2 id=结尾>结尾<a href=#结尾 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>这些还只是冰山一角，使用好Termux可以方便很多。</p><h2 id=参考文献>参考文献<a href=#参考文献 class=hanchor arialabel=Anchor>&#8983;</a></h2><p><a href=https://www.sqlsec.com/2018/05/termux.html#toc-heading-165>Termux 高级终端安装使用配置教程 | 国光</a></p><p><a href=https://p3terx.com/archives/termux-tutorial-1.html>Termux 使用教程 - P3TERX</a></p><p><a href=https://wiki.termux.com/wiki/Main_Page>Termux Wiki</a></p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://ywycd.github.io/post/netlify-some-changes/><span class=button__icon>←</span>
<span class=button__text>托管在Netlify的博客更改记录</span></a></span>
<span class="button next"><a href=https://ywycd.github.io/post/chfs-advanced/><span class=button__text>Chfs设置</span>
<span class=button__icon>→</span></a></span></div></div></div><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#基本操作>基本操作</a><ul><li><a href=#选项和菜单>选项和菜单</a></li><li><a href=#常用快捷>常用快捷</a></li><li><a href=#定制常用按键>定制常用按键</a></li><li><a href=#基本命令>基本命令</a></li><li><a href=#修改问候语>修改问候语</a></li><li><a href=#目录结构>目录结构</a></li><li><a href=#root权限>root权限</a></li><li><a href=#缩放文本>缩放文本</a></li></ul></li><li><a href=#进阶配置>进阶配置</a><ul><li><a href=#adb连接>adb连接</a></li><li><a href=#ssh服务>ssh服务</a></li><li><a href=#传输文件>传输文件</a></li><li><a href=#sftp>sftp</a></li><li><a href=#fish终端alias>fish终端alias</a></li></ul></li><li><a href=#结尾>结尾</a></li><li><a href=#参考文献>参考文献</a></li></ul></nav></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>:: Powered by <a href=http://gohugo.io>Hugo</a> 0.82.0</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><a id=back-to-top style=display:inline-block href=javascript:void(0); onclick="window.scrollTo({top:0,behavior:'smooth'})"><span class="iconfont icon-top"></span></a><script src=https://ywycd.github.io/assets/main.js?d41d8cd98f00b204e9800998ecf8427e></script><script>const addCopyButtons=function(a){document.querySelectorAll('pre > code').forEach(function(d){const b=document.createElement('button');b.className='copy-code-button',b.type='button',b.innerText='Copy';const c=document.createElement('div');c.className='copy-code-button-wrap',c.appendChild(b),b.addEventListener('click',function(){a.writeText(d.innerText).then(function(){b.blur(),b.innerText='Done!',setTimeout(function(){b.innerText='Copy'},2e3)},function(a){b.innerText='Error'})});const e=d.parentNode;e.insertAdjacentElement('beforebegin',c)})};window.addEventListener('load',function(b){const a=document.links;for(let b=0,c=a.length;b<c;b++)a[b].hostname!=window.location.hostname&&!a[b].href.startsWith('javascript:')&&!a[b].href.startsWith('mailto:')&&(a[b].target='_blank');document.querySelectorAll('#TableOfContents li').length>0&&(document.querySelector('#post-toc').style.display='block'),document.querySelectorAll('#post-toc a').forEach(a=>{a.addEventListener('click',a=>{document.querySelectorAll('#post-toc a').forEach(a=>{a.classList.remove('active')}),a.target.classList.add('active')})}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener('click',function(a){a.preventDefault(),document.getElementById(this.getAttribute('href').substring(1)).scrollIntoView({behavior:'smooth'})})}),navigator&&navigator.clipboard&&addCopyButtons(navigator.clipboard)})</script></div></body></html>