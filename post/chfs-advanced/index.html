<!doctype html><html lang=en><head><meta charset=utf-8><meta name=referrer content="same-origin"><title>Chfs设置 :: ywy — 有约不来过夜半，闲敲棋子落灯花</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="chfs文件共享服务器 自建网盘支持webdav，NextCloud功能太多。从 N1 docker 镜像分享找到了chfs。docker exec chfs addusr 用户名 密码 权限添"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://ywycd.github.io/post/chfs-advanced/><link rel=stylesheet href=https://ywycd.github.io/assets/style.min.css?d41d8cd98f00b204e9800998ecf8427e><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://ywycd.github.io/img/favicon/apple-icon-precomposed.png><link rel="shortcut icon" href=https://ywycd.github.io/img/apple-touch-icon-rm.png><meta name=twitter:card content="summary"><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Chfs设置 :: ywy"><meta property="og:description" content="chfs文件共享服务器 自建网盘支持webdav，NextCloud功能太多。从 N1 docker 镜像分享找到了chfs。docker exec chfs addusr 用户名 密码 权限添"><meta property="og:url" content="https://ywycd.github.io/post/chfs-advanced/"><meta property="og:site_name" content="ywy"><meta property="og:image" content="https://ywycd.github.io/img/apple-touch-icon-rm.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2021-01-16 17:14:23 +0800 +0800"></head><body><div class="container center headings--one-size"><header class=header style=background-image:url(/img/banner-rain-731313_1920.png);background-position:50%;background-repeat:no-repeat;background-size:cover><div class=header__inner><div class=header__logo><a href=https://ywycd.github.io/><div class=logo>ASDW</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li><li><a href=/tagcloud>TagCloud</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li><li><a href=/tagcloud>TagCloud</a></li></ul></nav><div class=feed-links></div></header><div class=content><div class=post><h1 class=post-title>Chfs设置</h1><div class=post-meta><span class=post-date>2021-01-16</span>
<span class=post-author>::
ywy</span>
:: Mod 2021-01-16(3f6a385)</div><div class=post-content><div><p>chfs文件共享服务器</p><p>自建网盘支持webdav，NextCloud功能太多。从
<a href=https://www.right.com.cn/forum/thread-911375-1-1.html>N1 docker 镜像分享</a>找到了chfs。<code>docker exec chfs addusr 用户名 密码 权限</code>添加账户，网页提示更新。
<a href=http://iscute.cn/chfs>官网</a><br>有分享文件需求，看了下其他
<a href=https://github.com/zhaojun1998/zfile>zfile</a>
<a href=https://larsjung.de/h5ai/>h5ai</a>。先升级chfs，有
<a href=https://hub.docker.com/r/jonnyan404/chfs>docker镜像</a>。根据介绍运行，不过不理想。配置<code>--path=/data</code>首页会显示分享。用<code>--path="d:\\projects|e:\\nsis"</code>失败，应该是因为没映射目录。<br>在目录下新建，但匿名会全部显示，研究rule。用<code>--rule="::r|ceshizu:ceshizu123:r:test:rwd"</code>失败，修改重复测试，受到<code>--rule="::|</code>匿名用户什么权限都没有启发，<code>:::share:r|admin:admin123:rwd</code>成功（遗漏:失败过）。访问权限分为四种：""(不可访问)，&ldquo;R&rdquo;(只读)，&ldquo;W&rdquo;(读写)，&ldquo;D&rdquo;(写+删除)。<br>老是删除重建，考虑自定义配置文件<code>--file=/data/xxx.ini</code>，顺便加上https访问。一直默认配置，发现ini没保存，重新填写。
<a href=http://iscute.cn/asset/chfs.ini>配置文件模板地址</a></p><div class=highlight><pre class=chroma><code class=language-docker data-lang=docker>docker run --restart<span class=o>=</span>on-failure:3 -d --name chfs -p 8080:443  -v /path/you/dir:/data jonnyan404/chfs --file<span class=o>=</span>/data/xxx.ini<span class=err>
</span></code></pre></div><p>设置完毕。之前webdav配置要重新修改，不然网络出错（ssl证书问题）。</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://ywycd.github.io/post/termux-note/><span class=button__icon>←</span>
<span class=button__text>Termux笔记</span></a></span>
<span class="button next"><a href=https://ywycd.github.io/post/auto-chekin/><span class=button__text>自动签到</span>
<span class=button__icon>→</span></a></span></div></div></div><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents></nav></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>:: Powered by <a href=http://gohugo.io>Hugo</a> 0.82.0</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><a id=back-to-top style=display:inline-block href=javascript:void(0); onclick="window.scrollTo({top:0,behavior:'smooth'})"><span class="iconfont icon-top"></span></a><script src=https://ywycd.github.io/assets/main.js?d41d8cd98f00b204e9800998ecf8427e></script><script>const addCopyButtons=function(a){document.querySelectorAll('pre > code').forEach(function(d){const b=document.createElement('button');b.className='copy-code-button',b.type='button',b.innerText='Copy';const c=document.createElement('div');c.className='copy-code-button-wrap',c.appendChild(b),b.addEventListener('click',function(){a.writeText(d.innerText).then(function(){b.blur(),b.innerText='Done!',setTimeout(function(){b.innerText='Copy'},2e3)},function(a){b.innerText='Error'})});const e=d.parentNode;e.insertAdjacentElement('beforebegin',c)})};window.addEventListener('load',function(b){const a=document.links;for(let b=0,c=a.length;b<c;b++)a[b].hostname!=window.location.hostname&&!a[b].href.startsWith('javascript:')&&!a[b].href.startsWith('mailto:')&&(a[b].target='_blank');document.querySelectorAll('#TableOfContents li').length>0&&(document.querySelector('#post-toc').style.display='block'),document.querySelectorAll('#post-toc a').forEach(a=>{a.addEventListener('click',a=>{document.querySelectorAll('#post-toc a').forEach(a=>{a.classList.remove('active')}),a.target.classList.add('active')})}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener('click',function(a){a.preventDefault(),document.getElementById(this.getAttribute('href').substring(1)).scrollIntoView({behavior:'smooth'})})}),navigator&&navigator.clipboard&&addCopyButtons(navigator.clipboard)})</script></div></body></html>